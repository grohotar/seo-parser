#!/bin/bash

# SEO-–ø–∞—Ä—Å–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–ø—Ä–æ—Å–∞ –Ω–∞ VPN –ø–æ –ª–æ–∫–∞—Ü–∏—è–º
# –ó–∞–ø—É—Å–∫: bash <(curl -sL https://raw.githubusercontent.com/grohotar/seo-parser/main/seo-parser.sh)

set -e

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m' # No Color

echo -e "${GREEN}=========================================${NC}"
echo -e "${GREEN}  SEO-–ø–∞—Ä—Å–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ VPN${NC}"
echo -e "${GREEN}=========================================${NC}"

# –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
TEMP_DIR=$(mktemp -d)
echo -e "${YELLOW}üìÅ –°–æ–∑–¥–∞–Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $TEMP_DIR${NC}"

# –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
cleanup() {
    echo -e "${YELLOW}üßπ –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤...${NC}"
    rm -rf "$TEMP_DIR"
    echo -e "${GREEN}‚úì –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã${NC}"
}

# –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ—á–∏—Å—Ç–∫—É –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
trap cleanup EXIT

cd "$TEMP_DIR"

# –°–æ–∑–¥–∞—ë–º requirements.txt
cat > requirements.txt << 'EOF'
pytrends==4.9.2
requests==2.31.0
pandas>=2.0.0
EOF

# –î–µ–∫–æ–¥–∏—Ä—É–µ–º config.py
base64 -d > config.py << 'EOF64'
IiIiCtCa0L7QvdGE0LjQs9GD0YDQsNGG0LjRjyDQtNC70Y8g0L/QsNGA0YHQtdGA0LAgU0VPLdC30LDQv9GA0L7RgdC+0LIKIiIiCgojINCh0L/QuNGB0L7QuiDRgdGC0YDQsNC9INC00LvRjyDQutCw0LbQtNC+0Lkg0YHRgtGA0LDQvdGC0LDQvNC4INC90LAg0YDRg9GB0YHQutC+0LwKQ09VTlRSSUVTID0gewogICAgItCi0YPRgNGG0LjRjyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJUdXJrZXkiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0YLRg9GA0LXRhtC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJ0dXJraXNoIgogICAgfSwKICAgICLQmtCw0LfQsNGF0YHRgtCw0L0iOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiS2F6YWtoc3RhbiIsCiAgICAgICAgImFkamVjdGl2ZV9ydSI6ICLQutCw0LfQsNGF0YHQutC40LkiLAogICAgICAgICJhZGplY3RpdmVfZW4iOiAia2F6YWtoIgogICAgfSwKICAgICLQk9C10YDQvNCw0L3QuNGPIjogewogICAgICAgICJuYW1lX2VuIjogIkdlcm1hbnkiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0L3QtdC80LXRhtC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJnZXJtYW4iCiAgICB9LAogICAgItCh0KjQkCI6IHsKICAgICAgICAibmFtZV9lbiI6ICJVU0EiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LDQvNC10YDQuNC60LDQvdGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImFtZXJpY2FuIgogICAgfSwKICAgICLQktC10LvQuNC60L7QsdGA0LjRgtCw0L3QuNGPIjogewogICAgICAgICJuYW1lX2VuIjogIlVuaXRlZCBLaW5nZG9tIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItCx0YDQuNGC0LDQvdGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImJyaXRpc2giCiAgICB9LAogICAgItCT0YDRg9C30LjRjyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJHZW9yZ2lhIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItCz0YDRg9C30LjQvdGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImdlb3JnaWFuIgogICAgfSwKICAgICLQkNGA0LzQtdC90LjRjyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJBcm1lbmlhIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItCw0YDQvNGP0L3RgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJhcm1lbmlhbiIKICAgIH0sCiAgICAi0KPQt9Cx0LXQutC40YHRgtCw0L0iOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiVXpiZWtpc3RhbiIsCiAgICAgICAgImFkamVjdGl2ZV9ydSI6ICLRg9C30LHQtdC60YHQutC40LkiLAogICAgICAgICJhZGplY3RpdmVfZW4iOiAidXpiZWsiCiAgICB9LAogICAgItCf0L7Qu9GM0YjQsCI6IHsKICAgICAgICAibmFtZV9lbiI6ICJQb2xhbmQiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0L/QvtC70YzRgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJwb2xpc2giCiAgICB9LAogICAgItCk0LjQvdC70Y/QvdC00LjRjyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJGaW5sYW5kIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItGE0LjQvdGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImZpbm5pc2giCiAgICB9LAogICAgItCd0LjQtNC10YDQu9Cw0L3QtNGLIjogewogICAgICAgICJuYW1lX2VuIjogIk5ldGhlcmxhbmRzIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItC90LjQtNC10YDQu9Cw0L3QtNGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImR1dGNoIgogICAgfSwKICAgICLQmtC40L/RgCI6IHsKICAgICAgICAibmFtZV9lbiI6ICJDeXBydXMiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LrQuNC/0YDRgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJjeXByaW90IgogICAgfSwKICAgICLQp9C10YXQuNGPIjogewogICAgICAgICJuYW1lX2VuIjogIkN6ZWNoIFJlcHVibGljIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItGH0LXRiNGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImN6ZWNoIgogICAgfSwKICAgICLQr9C/0L7QvdC40Y8iOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiSmFwYW4iLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0Y/Qv9C+0L3RgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJqYXBhbmVzZSIKICAgIH0sCiAgICAi0KHQuNC90LPQsNC/0YPRgCI6IHsKICAgICAgICAibmFtZV9lbiI6ICJTaW5nYXBvcmUiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0YHQuNC90LPQsNC/0YPRgNGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogInNpbmdhcG9yZWFuIgogICAgfSwKICAgICLQmtC40YLQsNC5IjogewogICAgICAgICJuYW1lX2VuIjogIkNoaW5hIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItC60LjRgtCw0LnRgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJjaGluZXNlIgogICAgfSwKICAgICLQk9C+0L3QutC+0L3QsyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJIb25nIEtvbmciLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LPQvtC90LrQvtC90LPRgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJob25nIGtvbmciCiAgICB9LAogICAgItCY0L3QtNC40Y8iOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiSW5kaWEiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LjQvdC00LjQudGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImluZGlhbiIKICAgIH0sCiAgICAi0JjQt9GA0LDQuNC70YwiOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiSXNyYWVsIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItC40LfRgNCw0LjQu9GM0YHQutC40LkiLAogICAgICAgICJhZGplY3RpdmVfZW4iOiAiaXNyYWVsaSIKICAgIH0sCiAgICAi0J7QsdGK0LXQtNC40L3QtdC90L3Ri9C1INCQ0YDQsNCx0YHQutC40LUg0K3QvNC40YDQsNGC0YsiOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiVUFFIiwKICAgICAgICAibmFtZV9ydV9zaG9ydCI6ICLQu9C10LAIsCiAgICAgICAgImFkamVjdGl2ZV9ydSI6ICLQkdGP0LLQsNC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJlbWlyYXRpIgogICAgfSwKICAgICLQqNCy0LXQudGG0LDRgNC40Y8iOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiU3dpdHplcmxhbmQiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0YjQstC10LnRhtCw0YDQsdGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogInN3aXNzIgogICAgfSwKICAgICLQqNCy0LXRhtC40Y8iOiB7CiAgICAgICAgIm5hbWVfZW4iOiAiU3dlZGVuIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItGI0LLQtdC00YHQutC40LkiLAogICAgICAgICJhZGplY3RpdmVfZW4iOiAic3dlZGlzaCIKICAgIH0sCiAgICAi0JrQsNC90LDQtNCwIjogewogICAgICAgICJuYW1lX2VuIjogIkNhbmFkYSIsCiAgICAgICAgImFkamVjdGl2ZV9ydSI6ICLQutCw0L3QsNC00YHQutC40LkiLAogICAgICAgICJhZGplY3RpdmVfZW4iOiAiY2FuYWRpYW4iCiAgICB9LAogICAgItCQ0LLRgdGC0YDQsNC70LjRjyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJBdXN0cmFsaWEiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LDQstGB0YLRgNCw0LvQuNC50YHQutC40LkiLAogICAgICAgICJhZGplY3RpdmVfZW4iOiAiYXVzdHJhbGlhbiIKICAgIH0sCiAgICAi0JHRgNCw0LfQuNC70LjRjyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJCcmF6aWwiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LHRgNCw0LfQuNC70YzRgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJicmF6aWxpYW4iCiAgICB9LAogICAgItCQ0YDQs9C10L3RgtC40L3QsCI6IHsKICAgICAgICAibmFtZV9lbiI6ICJBcmdlbnRpbmEiLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LDRgNCz0LXQvdGC0LjQvdGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogImFyZ2VudGluaWFuIgogICAgfSwKICAgICLQnNC10LrRgdC40LrQsCI6IHsKICAgICAgICAibmFtZV9lbiI6ICJNZXhpY28iLAogICAgICAgICJhZGplY3RpdmVfcnUiOiAi0LzQtdC60YHQuNC60LDQvdGB0LrQuNC5IiwKICAgICAgICAiYWRqZWN0aXZlX2VuIjogIm1leGljYW4iCiAgICB9LAogICAgItCu0LbQvdCw0Y8g0JrQvtGA0LXRjyI6IHsKICAgICAgICAibmFtZV9lbiI6ICJTb3V0aCBLb3JlYSIsCiAgICAgICAgImFkamVjdGl2ZV9ydSI6ICLQutC+0YDQtdC50YHQutC40LkiLAogICAgICAgICJhZGplY3RpdmVfZW4iOiAia29yZWFuIgogICAgfSwKICAgICLQotCw0LjQu9Cw0L3QtCI6IHsKICAgICAgICAibmFtZV9lbiI6ICJUaGFpbGFuZCIsCiAgICAgICAgImFkamVjdGl2ZV9ydSI6ICLRgtCw0LnRgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJ0aGFpIgogICAgfSwKICAgICLQnNCw0LvQsNC50LfQuNGPIjogewogICAgICAgICJuYW1lX2VuIjogIk1hbGF5c2lhIiwKICAgICAgICAiYWRqZWN0aXZlX3J1IjogItC80LDQu9Cw0LnQt9C40LnRgdC60LjQuSIsCiAgICAgICAgImFkamVjdGl2ZV9lbiI6ICJtYWxheXNpYW4iCiAgICB9Cn0KCiMg0J3QsNGB0YLRgNC+0LnQutC4INC/0LXRgNC40L7QtNC+0LIg0LDQvdCw0LvQuNC30LAKVElNRUZSQU1FUyA9IHsKICAgICIxX21vbnRoIjogInRvZGF5IDEtbSIsCiAgICAiM19tb250aHMiOiAidG9kYXkgMy1tIgp9CgojINCd0LDRgdGC0YDQvtC50LrQuCDQvNC10LbQtNGDINC30LDQv9GA0L7RgdCw0LzQuCAo0KDQvtGB0YHQuNGPKQpHRU8gPSAiUlUiCgojINCd0LDRgdGC0YDQvtC50LrQuCDQutCw0YLQtdCz0L7RgNC40LkgKElUL9CY0L3RgtC10YDQvdC10YIpCkNBVEVHT1JZID0gMTMKCiMg0JfQsNC00LXRgNC20LrQsCDQvNC10LbQtNGDINC30LDQv9GA0L7RgdCw0LzQuCAo0LIg0YHQtdC60YPQvdC00LDRhSkg0YfRgtC+0LHRiyDQvdC1INC30LDQsdC70L7QutC40YDQvtCy0LDQu9C4ClJFUVVFU1RfREVMQVkgPSAxMA==

# –î–µ–∫–æ–¥–∏—Ä—É–µ–º query_builder.py
base64 -d > query_builder.py << 'EOF64'
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AgICAgICBhbGxfcXVlcmllc1tjb3VudHJ5X25hbWVdID0gdmFyaWF0aW9ucwogICAgICAgIAogICAgcmV0dXJuIGFsbF9xdWVyaWVzCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGZyb20gY29uZmlnIGltcG9ydCBDT1VOVFJJRVMKICAgIAogICAgIyDQotC10YHRgiDQs9C10L3QtdGA0LDRhtC40Lgg0LfQsNC/0YDQvtGB0L7QsgogICAgYWxsX3F1ZXJpZXMgPSBnZW5lcmF0ZV9hbGxfcXVlcmllcyhDT1VOVFJJRVMpCiAgICAKICAgIHByaW50KCLQn9GA0LjQvNC10YAg0LfQsNC/0YDQvtGB0L7QsiDQtNC70Y8g0KLRg9GA0YbQuNC4OiIpCiAgICBmb3IgcXVlcnkgaW4gYWxsX3F1ZXJpZXNbItCi0YPRgNGG0LjRjyJdOgogICAgICAgIHByaW50KGYiICAtIHtxdWVyeX0iKQogICAgCiAgICBwcmludChmIlxu0JLRgdC10LPQviDRgdGC0YDQsNC9OiB7bGVuKGFsbF9xdWVyaWVzKX0iKQogICAgcHJpbnQoZiLQktGB0LXQs9C+INCy0LDRgNC40LDRhtC40Lkg0LfQsNC/0YDQvtGB0L7Qsjoge3N1bShsZW4odikgZm9yIHYgaW4gYWxsX3F1ZXJpZXMudmFsdWVzKCkpfSIp

# –î–µ–∫–æ–¥–∏—Ä—É–µ–º google_trends_parser.py
base64 -d > google_trends_parser.py << 'EOF64'
IiIiCtCf0LDRgNGB0LXRgCBHb29nbGUgVHJlbmRzINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0LTQsNC90L3Ri9GFINC+INC/0L7QuNGB0LrQvtCy0YvRhSDQt9Cw0L/RgNC+0YHQsNGFCiIiIgppbXBvcnQgdGltZQpmcm9tIHB5dHJlbmRzLnJlcXVlc3QgaW1wb3J0IFRyZW5kUmVxCmltcG9ydCBwYW5kYXMgYXMgcGQKZnJvbSBjb25maWcgaW1wb3J0IEdFTywgQ0FURUdPUlksIFJFUVVFU1RfREVMQVksIFRJTUVGUkFNRVMKCgpjbGFzcyBHb29nbGVUcmVuZHNQYXJzZXI6CiAgICAiIiLQmtC70LDRgdGBINC00LvRjyDQv9Cw0YDRgdC40L3Qs9CwINC00LDQvdC90YvRhSDQuNC3IEdvb2dsZSBUcmVuZHMiIiIKICAgIAogICAgZGVmIF9faW5pdF9fKHNlbGYsIGdlbz0iUlUiLCBjYXRlZ29yeT1DQVRFR09SWSwgZGVsYXk9UkVRVUVTVF9ERUxBWSk6CiAgICAgICAgIiIiCiAgICAgICAg0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/QsNGA0YHQtdGA0LAKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBnZW86INCa0L7QtCDRgdGC0YDQsNC90Ysg0LTQu9GPINCz0LXQvtC70L7QutCw0YbQuNC4IChSVSAtINCg0L7RgdGB0LjRjykKICAgICAgICAgICAgY2F0ZWdvcnk6INCa0LDRgtC10LPQvtGA0LjRjyDQv9C+0LjRgdC60LAgKDEzIC0gSVQv0JjQvdGC0LXRgNC90LXRgikKICAgICAgICAgICAgZGVsYXk6INCX0LDQtNC10YDQttC60LAg0LzQtdC20LTRgyDQt9Cw0L/RgNC+0YHQsNC80Lgg0LIg0YHQtdC60YPQvdC00LDRhQogICAgICAgICIiIgogICAgICAgIHNlbGYuZ2VvID0gZ2VvCiAgICAgICAgc2VsZi5jYXRlZ29yeSA9IGNhdGVnb3J5CiAgICAgICAgc2VsZi5kZWxheSA9IGRlbGF5CiAgICAgICAgc2VsZi5weXRyZW5kcyA9IFRyZW5kUmVxKGhsPSdydS1SVScsIHR6PTE4MCkKICAgICAgICBzZWxmLnJlcXVlc3RfY291bnQgPSAwCiAgICAgICAgCiAgICBkZWYgZ2V0X2ludGVyZXN0X292ZXJfdGltZShzZWxmLCBxdWVyaWVzLCB0aW1lZnJhbWUpOgogICAgICAgICIiIgogICAgICAgINCf0L7Qu9GD0YfQsNC10YIg0LjQvdGC0LXRgNC10YEg0Log0LfQsNC/0YDQvtGB0LDQvCDQstC+INCy0YDQtdC80LXQvdC4CiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgcXVlcmllczog0KHQv9C40YHQvtC6INC30LDQv9GA0L7RgdC+0LIgKNC80LDQutGB0LjQvNGD0LwgNSDQt9CwINGA0LDQtykKICAgICAgICAgICAgdGltZWZyYW1lOiDQn9C10YDQuNC+0LQg0LLRgNC10LzQtdC90LgKICAgICAgICAgICAgCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgRGF0YUZyYW1lOiDQlNCw0L3QvdC90LjQuCDQuNC90YLQtdGA0LXRgdCwINCy0L4g0LLRgNC10LzQtdC90LgKICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucHl0cmVuZHMuYnVpbGRfcGF5bG9hZCgKICAgICAgICAgICAgICAgIHF1ZXJpZXMsCiAgICAgICAgICAgICAgICBjYXQ9c2VsZi5jYXRlZ29yeSwKICAgICAgICAgICAgICAgIHRpbWVmcmFtZT10aW1lZnJhbWUsCiAgICAgICAgICAgICAgICBnZW89c2VsZi5nZW8KICAgICAgICAgICAgKQogICAgICAgICAgICBkYXRhID0gc2VsZi5weXRyZW5kcy5pbnRlcmVzdF9vdmVyX3RpbWUoKQogICAgICAgICAgICAKICAgICAgICAgICAgc2VsZi5yZXF1ZXN0X2NvdW50ICs9IDEKICAgICAgICAgICAgaWYgc2VsZi5yZXF1ZXN0X2NvdW50ID4gMToKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoc2VsZi5kZWxheSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiLQntGI0LjQsdC60LAg0L/RgNC4INC/0L7Qu9GD0YfQtdC90LjQuCDQtNCw0L3QvdGL0YUg0LTQu9GPIHtxdWVyaWVzfToge2V9IikKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgIAogICAgZGVmIGdldF9hdmVyYWdlX2ludGVyZXN0KHNlbGYsIHF1ZXJpZXMsIHRpbWVmcmFtZSk6CiAgICAgICAgIiIiCiAgICAgICAg0J/QvtC70YPRh9Cw0LXRgiINGB0YDQtdC00L3QuNC5INC40L3RgtC10YDQtdGBINC6INC30LDQv9GA0L7RgdCw0Lwg0LfQsCDQv9C10YDQuNC+0LQKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBxdWVyaWVzOiDQodC/0LjRgdC+0Log0LfQsNC/0YDQvtGB0L7QsgogICAgICAgICAgICB0aW1lZnJhbWU6INCf0LXRgNC40L7QtCDQstGA0LXQvNC10L3QuAogICAgICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBkaWN0OiB7cXVlcnk6IGF2ZXJhZ2VfaW50ZXJlc3R9INC40LvQuCBOb25lINC10YHQu9C4INC+0YjQuNCx0LrQsAogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgZGF0YSA9IHNlbGYuZ2V0X2ludGVyZXN0X292ZXJfdGltZShxdWVyaWVzWzo1XSwgdGltZWZyYW1lKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgZGF0YSBpcyBOb25lIG9yIGRhdGEuZW1wdHk6CiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgICAgICAKICAgICAgICAgICAgIyDQo9C00LDQu9GP0LXQvCDRgdGC0L7Qu9Cx0LXRhiBpc1BhcnRpYWwg0LXRgdC70Lgg0LXRgdGC0YwKICAgICAgICAgICAgaWYgJ2lzUGFydGlhbCcgaW4gZGF0YS5jb2x1bW5zOgogICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEuZHJvcChjb2x1bW5zPVsnaXNQYXJ0aWFsJ10pCiAgICAgICAgICAgIAogICAgICAgICAgICAjINCS0YvRh9C40YHQu9GP0LXQvCDRgdGA0LXQtNC90LXQtSDQt9C90LDRh9C10L3QuNC1INC00LvRjyDQutCw0LbQtNC+0LPQviDQt9Cw0L/RgNC+0YHQsAogICAgICAgICAgICBhdmVyYWdlcyA9IHt9CiAgICAgICAgICAgIGZvciBxdWVyeSBpbiBxdWVyaWVzWzo1XToKICAgICAgICAgICAgICAgIGlmIHF1ZXJ5IGluIGRhdGEuY29sdW1uczoKICAgICAgICAgICAgICAgICAgICBhdmVyYWdlc1txdWVyeV0gPSBkYXRhW3F1ZXJ5XS5tZWFuKCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXZlcmFnZXNbcXVlcnldID0gMAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gYXZlcmFnZXMKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYi0J7RiNC40LHQutCwINC/0YDQuCDQstGL0YfQuNGB0LvQtdC90LjQuCDRgdGA0LXQtNC90LXQs9C+INC40L3RgtC10YDQtdGB0LA6IHtlfSIpCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAKICAgIGRlZiBwYXJzZV9jb3VudHJ5X3F1ZXJpZXMoc2VsZiwgY291bnRyeV9uYW1lLCBxdWVyaWVzLCB0aW1lZnJhbWVzKToKICAgICAgICAiIiIKICAgICAgICDQn9Cw0YDRgdC40YIg0LLRgdC1INC30LDQv9GA0L7RgdGLINC00LvRjyDQvtC00L3QvtC5INGB0YLRgNCw0L3RiwogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGNvdW50cnlfbmFtZTog0J3QsNC30LLQsNC90LjQtSDRgdGC0YDQsNC90YsKICAgICAgICAgICAgcXVlcmllczog0KHQv9C40YHQvtC6INC30LDQv9GA0L7RgdC+0LIg0LTQu9GPINGB0YLRgNCw0L3RiwogICAgICAgICAgICB0aW1lZnJhbWVzOiDQodC70L7QstCw0YDRjCBYtgbmFtZTogdmFsdWV9CiAgICAgICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIGRpY3Q6INCU0LDQvdC90LjQuCDQv9C+INGB0YDQtdC00L3QuNC4INC4INC/0LXRgNC40L7QtNCw0LwKICAgICAgICAiIiIKICAgICAgICBjb3VudHJ5X2RhdGEgPSB7CiAgICAgICAgICAgICJjb3VudHJ5IjogY291bnRyeV9uYW1lLAogICAgICAgICAgICAicXVlcmllcyI6IHt9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICMg0J/QvtC70YPRh9Cw0LXQvCDQtNCw0L3QvdGL0LUg0LTQu9GPINC60LDQttC00L7Qs9C+INC/0LXRgNC40L7QtNCwKICAgICAgICBmb3IgcGVyaW9kX25hbWUsIHBlcmlvZF92YWx1ZSBpbiB0aW1lZnJhbWVzLml0ZW1zKCk6CiAgICAgICAgICAgIHBlcmlvZF9kYXRhID0ge30KICAgICAgICAgICAgCiAgICAgICAgICAgICMg0J/QvtC70YPRh9Cw0LXQvCDRgdGA0LXQtNC90LjQuSDQuNC90YLQtdGA0LXRgdC60LjQtSDQtNC70Y8g0LrQsNC20LTQvtCz0L4g0LfQsNC/0YDQvtGB0L7QsgogICAgICAgICAgICBhdmVyYWdlcyA9IHNlbGYuZ2V0X2F2ZXJhZ2VfaW50ZXJlc3QocXVlcmllcywgcGVyaW9kX3ZhbHVlKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgYXZlcmFnZXM6CiAgICAgICAgICAgICAgICAjINCd0LDRhdC+0LTQuNC80LjRgtC10LvQjCDQt9Cw0L/RgNC+0YEg0YEg0LzQsNC60YHQuNC80LDQu9GM0L3Ri9C8INC40L3RgtC10YDQtdGB0L7QvAogICAgICAgICAgICAgICAgbWF4X3F1ZXJ5ID0gbWF4KGF2ZXJhZ2VzLml0ZW1zKCksIGtleT1sYW1iZGEgeDogeFsxXSBpZiB4WzFdIGlzIG5vdCBOb25lIGVsc2UgMCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcGVyaW9kX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgImF2ZXJhZ2VzIjogYXZlcmFnZXMsCiAgICAgICAgICAgICAgICAgICAgIm1heF9pbnRlcmVzdCI6IG1heF9xdWVyeVsxXSBpZiBtYXhfcXVlcnlbMV0gaXMgbm90IE5vbmUgZWxzZSAwLAogICAgICAgICAgICAgICAgICAgICJ0b3BfcXVlcnkiOiBtYXhfcXVlcnlbMF0sCiAgICAgICAgICAgICAgICAgICAgImFsbF9xdWVyaWVzIjogcXVlcmllcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjINCf0L7Qu9GD0YfQsNC10Lwg0YHRstGP0LfQsNC90L3Ri9C1INC30LDQv9GA0L7RgdGLINC00LvRjyDRgtC+0L8g0LfQsNC/0YDQvtGB0LAKICAgICAgICAgICAgICAgIHJlbGF0ZWQgPSBzZWxmLmdldF9yZWxhdGVkX3F1ZXJpZXMobWF4X3F1ZXJ5WzBdLCBwZXJpb2RfdmFsdWUpCiAgICAgICAgICAgICAgICBpZiByZWxhdGVkOgogICAgICAgICAgICAgICAgICAgIHBlcmlvZF9kYXRhWyJyZWxhdGVkX3F1ZXJpZXMiXSA9IHJlbGF0ZWQKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvdW50cnlfZGF0YVsicXVlcmllcyJdW3BlcmlvZF9uYW1lXSA9IHBlcmlvZF9kYXRhCiAgICAgICAgCiAgICAgICAgcmV0dXJuIGNvdW50cnlfZGF0YQogICAgCiAgICBkZWYgZ2V0X3JlbGF0ZWRfcXVlcmllcyhzZWxmLCBxdWVyeSwgdGltZWZyYW1lKToKICAgICAgICAiIiIKICAgICAgICDQn9C+0LvRg9GH0LDQtdGCINGB0LLRj9C30LDQvdC90YvQtSDQt9Cw0L/RgNC+0YHRiwogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHF1ZXJ5OiDQn9C+0LjRgdC60L7QstGL0Lkg0LfQsNC/0YDQvtGBCiAgICAgICAgICAgIHRpbWVmcmFtZTogINCf0LXRgNC40L7QtCDQstGA0LXQvNC10L3QuAogICAgICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBkaWN0OiDQodCy0Y/Qt9Cw0L3QvdGL0LUg0LfQsNC/0YDQvtGB0YsgKHJpc2luZyDQuCB0b3ApCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnB5dHJlbmRzLmJ1aWxkX3BheWxvYWQoCiAgICAgICAgICAgICAgICBbcXVlcnldLAogICAgICAgICAgICAgICAgY2F0PXNlbGYuY2F0ZWdvcnksCiAgICAgICAgICAgICAgICB0aW1lZnJhbWU9dGltZWZyYW1lLAogICAgICAgICAgICAgICAgZ2VvPXNlbGYuZ2VvCiAgICAgICAgICAgICkKICAgICAgICAgICAgZGF0YSA9IHNlbGYucHl0cmVuZHMucmVsYXRlZF9xdWVyaWVzKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYucmVxdWVzdF9jb3VudCArPSAxCiAgICAgICAgICAgIGlmIHNlbGYucmVxdWVzdF9jb3VudCA+IDE6CiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHNlbGYuZGVsYXkpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIGRhdGEuZ2V0KHF1ZXJ5LCB7fSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYi0J7RiNC40LHQutCwINC/0YDQuCDQv9C+0LvRg9GH0LXQvdC40Lgg0YHQstGP0LfQsNC90L3Ri9GFINC30LDQv9GA0L7RgdC+0LIg0LTQu9GPIHtxdWVyeX06IHtlfSIpCiAgICAgICAgICAgIHJldHVybiB7fQogICAgCiAgICBkZWYgcGFyc2VfYWxsX2NvdW50cmllcyhzZWxmLCBhbGxfcXVlcmllcywgdGltZWZyYW1lcyk6CiAgICAgICAgIiIiCiAgICAgICAg0J/QsNGA0YHQuNGCINC00LDQvdC90YvQtSDQtNC70Y8g0LLRgdC10YUg0YHRgtGA0LDQvQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGFsbF9xdWVyaWVzOiDQodC70L7QstCw0YDRjCB7Y291bnRyeV9uYW1lOiBbcXVlcmllc119CiAgICAgICAgICAgIHRpbWVmcmFtZXM6INCh0LvQvtCy0LDRgNGMINGBINC/0LXRgNC40L7QtNCw0LzQuAogICAgICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBkaWN0OiDQlNCw0L3QvdC90LjQuCDQv9C+INGB0YDQtdC00L3QuNC4INC4INC/0LXRgNC40L7QtNCw0LwKICAgICAgICAiIiIKICAgICAgICBhbGxfZGF0YSA9IHt9CiAgICAgICAgdG90YWxfY291bnRyaWVzID0gbGVuKGFsbF9xdWVyaWVzKQogICAgICAgIAogICAgICAgIHByaW50KGYi0J3QsNGH0LjQvdCw0LXRvCDQv9Cw0YDRgdC40L3Qs9CwIHt0b3RhbF9jb3VudHJpZXN9INGB0YLRgNCw0L0uLi4iKQogICAgICAgIHByaW50KCI9IiAqIDYwKQogICAgICAgIAogICAgICAgIGZvciBpZHgsIChjb3VudHJ5X25hbWUsIHF1ZXJpZXMpIGluIGVudW1lcmF0ZShhbGxfcXVlcmllcy5pdGVtcygpLCAxKToKICAgICAgICAgICAgcHJpbnQoZiJbe2lkeH0ve3RvdGFsX2NvdW50cmllc11dINCf0LDRgNGB0LjQvCB7Y291bnRyeV9uYW1lfS4uLiIpCiAgICAgICAgICAgIAogICAgICAgICAgICBjb3VudHJ5X2RhdGEgPSBzZWxmLnBhcnNlX2NvdW50cnlfcXVlcmllcyhjb3VudHJ5X25hbWUsIHF1ZXJpZXMsIHRpbWVmcmFtZXMpCiAgICAgICAgICAgIGFsbF9kYXRhW2NvdW50cnlfbmFtZV0gPSBjb3VudHJ5X2RhdGEKICAgICAgICAgICAgCiAgICAgICAgICAgICMg0J3QtdCx0L7Qu9GM0YjQsNGPINC30LDQtNC10YDQttC60LAg0LzQtdC20LTRgyDRgdGC0YDQsNC90LDQvNC4KICAgICAgICAgICAgaWYgaWR4IDwgdG90YWxfY291bnRyaWVzOgogICAgICAgICAgICAgICAgdGltZS5zbGVlcChzZWxmLmRlbGF5KQogICAgICAgIAogICAgICAgIHByaW50KCI9IiAqIDYwKQogICAgICAgIHByaW50KGYiItCf0LDRgNGB0LjQvdCzINC30LDQstC10YDRiNC10L0hINCS0YHQtdCz0L4g0LfQsNC/0YDQvtGB0L7Qsjoge3NlbGYucmVxdWVzdF9jb3VudH0iKQogICAgICAgIAogICAgICAgIHJldHVybiBhbGxfZGF0YQoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBmcm9tIHF1ZXJ5X2J1aWxkZXIgaW1wb3J0IGdlbmVyYXRlX2FsbF9xdWVyaWVzCiAgICBmcm9tIGNvbmZpZyBpbXBvcnQgQ09VTlRSSUVTCiAgICAKICAgICMg0KLQtdGB0YIg0L/QsNGA0YHQtdGA0LAKICAgIHBhcnNlciA9IEdvb2dsZVRyZW5kc1BhcnNlcigpCiAgICAKICAgICMg0JPQtdC90LXRgNC40YDRg9C10Lwg0LfQsNC/0YDQvtGB0YsKICAgIGFsbF9xdWVyaWVzID0gZ2VuZXJhdGVfYWxsX3F1ZXJpZXMoQ09VTlRSSUVTKQogICAgCiAgICAjINCi0LXRgdGC0LjRgNGD0LXQvCDQvdCwINC+0LTQvdC+0Lkg0YHRgtGA0LDQvdC1CiAgICB0ZXN0X2NvdW50cnkgPSAi0KLRg9GA0YbQuNGPIgogICAgcHJpbnQoZiLQotC10YHRgiDQv9Cw0YDRgdC10YDQsCDQtNC70Y8ge3Rlc3RfY291bnRyeX0iKQogICAgcHJpbnQoIi0iICogNjApCiAgICAKICAgIHF1ZXJpZXMgPSBhbGxfcXVlcmllc1t0ZXN0X2NvdW50cnldCiAgICBkYXRhID0gcGFyc2VyLnBhcnNlX2NvdW50cnlfcXVlcmllcyh0ZXN0X2NvdW50cnksIHF1ZXJpZXMsIFRJTUVGUkFNRVMpCiAgICAKICAgIHByaW50KGYiXG7QoNC10LfRg9C70YzRgtCw0YLRiyDQtNC70Y8ge3Rlc3RfY291bnRyeX06IikKICAgIGZvciBwZXJpb2QsIHBlcmlvZF9kYXRhIGluIGRhdGFbInF1ZXJpZXMiXS5pdGVtcygpOgogICAgICAgIGlmIHBlcmlvZF9kYXRhOgogICAgICAgICAgICBwcmludChmIlxu0J/QtdGA0LjQvtC0IHtwZXJpb2R9OiIpCiAgICAgICAgICAgIHByaW50KGYiICDQotC+0L8g0LfQsNC/0YDQvtGBOiB7cGVyaW9kX2RhdGFbJ3RvcF9xdWVyeSddfSIpCiAgICAgICAgICAgIHByaW50KGYiICDQnNCw0LrRgS4g0LjQvdGC0LXRgNC10YE6IHtwZXJpb2RfZGF0YVsnbWF4X2ludGVyZXN0J119IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChmIlxu0J/QtdGA0LjQvtC0IHtwZXJpb2R9OiDQndC10YIg0LTQsNC90L3Ri9GFIik=

# –î–µ–∫–æ–¥–∏—Ä—É–µ–º analyzer.py
base64 -d > analyzer.py << 'EOF64'
IiIiCtCQ0L3QsNC70LjQt9Cw0YLQvtGAINC00LDQvdC90YvRhSBTRU8t0LfQsNC/0YDQvtGB0L7QsgoiIiIgZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKCgpjbGFzcyBTRU9BbmFseXplcjoKICAgICIiItCa0LvQsNGB0YEg0LTQu9GPINCw0L3QsNC70LjQt9Cw0YLQvtGA0LAKICAgIAogICAgZGVmIF9faW5pdF9fKHNlbGYsIGFsbF9kYXRhKToKICAgICAgICBzZWxmLmFsbF9kYXRhID0gYWxsX2RhdGEKICAgICAgICBzZWxmLmFuYWx5emVkID0ge30KICAgICAgICAKICAgIGRlZiBhbmFseXplX2FsbF9jb3VudHJpZXMoc2VsZik6CiAgICAgICAgc2VsZi5hbmFseXplZCA9IHsKICAgICAgICAgICAgImNvdW50cmllcyI6IHt9LAogICAgICAgICAgICAicmFua2luZyI6IHt9LAogICAgICAgICAgICAidGltZXN0YW1wIjogZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVZLSVtLSVkICVIOiVNOiVTIikKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZm9yIGNvdW50cnlfbmFtZSwgY291bnRyeV9kYXRhIGluIHNlbGYuYWxsX2RhdGEuaXRlbXMoKToKICAgICAgICAgICAgc2VsZi5hbmFseXplZFsiY291bnRyaWVzIl1bY291bnRyeV9uYW1lXSA9IHNlbGYuX2FuYWx5emVfY291bnRyeShjb3VudHJ5X2RhdGEpCiAgICAgICAgCiAgICAgICAgc2VsZi5fY3JlYXRlX3JhbmtpbmdzKCkKICAgICAgICAKICAgICAgICByZXR1cm4gc2VsZi5hbmFseXplZAogICAgCiAgICBkZWYgX2FuYWx5emVfY291bnRyeShzZWxmLCBjb3VudHJ5X2RhdGEpOgogICAgICAgIGFuYWx5c2lzID0gewogICAgICAgICAgICAiY291bnRyeSI6IGNvdW50cnlfZGF0YVsiY291bnRyeSJdLAogICAgICAgICAgICAicGVyaW9kcyI6IHt9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZvciBwZXJpb2RfbmFtZSwgcGVyaW9kX2RhdGEgaW4gY291bnRyeV9kYXRhWyJxdWVyaWVzIl0uaXRlbXMoKToKICAgICAgICAgICAgaWYgcGVyaW9kX2RhdGEgYW5kIHBlcmlvZF9kYXRhLmdldCgibWF4X2ludGVyZXN0IiwgMCkgPiAwOgogICAgICAgICAgICAgICAgcGVyaW9kX2FuYWx5c2lzID0gewogICAgICAgICAgICAgICAgICAgICJtYXhfaW50ZXJlc3QiOiBwZXJpb2RfZGF0YVsibWF4X2ludGVyZXN0Il0sCiAgICAgICAgICAgICAgICAgICAgInRvcF9xdWVyeSI6IHBlcmlvZF9kYXRhWyJ0b3BfcXVlcnkiXSwKICAgICAgICAgICAgICAgICAgICAiYWxsX2ludGVyZXN0cyI6IHBlcmlvZF9kYXRhWyJhdmVyYWdlcyJdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhbmFseXNpc1sicGVyaW9kcyJdW3BlcmlvZF9uYW1lXSA9IHBlcmlvZF9hbmFseXNpcwogICAgICAgIAogICAgICAgIHJldHVybiBhbmFseXNpcwogICAgCiAgICBkZWYgX2NyZWF0ZV9yYW5raW5ncyhzZWxmKToKICAgICAgICByYW5raW5nXzNtID0gW10KICAgICAgICByYW5raW5nXzFtID0gW10KICAgICAgICAKICAgICAgICBmb3IgY291bnRyeV9uYW1lLCBhbmFseXNpcyBpbiBzZWxmLmFuYWx5emVkWyJjb3VudHJpZXMiXS5pdGVtcygpOgogICAgICAgICAgICBpZiAiM19tb250aHMiIGluIGFuYWx5c2lzWyJwZXJpb2RzIl06CiAgICAgICAgICAgICAgICByYW5raW5nXzNtLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgImNvdW50cnkiOiBjb3VudHJ5X25hbWUsCiAgICAgICAgICAgICAgICAgICAgImludGVyZXN0IjogYW5hbHlzaXNbInBlcmlvZHMiXVsiM19tb250aHMiXVsibWF4X2ludGVyZXN0Il0sCiAgICAgICAgICAgICAgICAgICAgInRvcF9xdWVyeSI6IGFuYWx5c2lzWyJwZXJpb2RzIl1bIjNfbW9udGhzIl1bInRvcF9xdWVyeSJdCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgIjFfbW9udGgiIGluIGFuYWx5c2lzWyJwZXJpb2RzIl06CiAgICAgICAgICAgICAgICByYW5raW5nXzFtLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgImNvdW50cnkiOiBjb3VudHJ5X25hbWUsCiAgICAgICAgICAgICAgICAgICAgImludGVyZXN0IjogYW5hbHlzaXNbInBlcmlvZHMiXVsiMV9tb250aCJdWyJtYXhfaW50ZXJlc3QiXSwKICAgICAgICAgICAgICAgICAgICAidG9wX3F1ZXJ5IjogYW5hbHlzaXNbInBlcmlvZHMiXVsiMV9tb250aCJdWyJ0b3BfcXVlcnkiXQogICAgICAgICAgICAgICAgfSkKICAgICAgICAKICAgICAgICByYW5raW5nXzNtLnNvcnQoa2V5PWxhbWJkYSB4OiB4WyJpbnRlcmVzdCJdLCByZXZlcnNlPVRydWUpCiAgICAgICAgcmFua2luZ18xbS5zb3J0KGtleT1sYW1iZGEgeDogeFsiaW50ZXJlc3QiXSwgcmV2ZXJzZT1UcnVlKQogICAgICAgIAogICAgICAgIHNlbGYuYW5hbHl6ZWRbInJhbmtpbmciXVsiM19tb250aHMiXSA9IHJhbmtpbmdfM20KICAgICAgICBzZWxmLmFuYWx5emVkWyJyYW5raW5nIl1bIjFfbW9udGgiXSA9IHJhbmtpbmdfMW0KICAgICAgICAKICAgICAgICBzZWxmLl9jYWxjdWxhdGVfdHJlbmQoKQogICAgCiAgICBkZWYgX2NhbGN1bGF0ZV90cmVuZChzZWxmKToKICAgICAgICB0cmVuZHMgPSBbXQogICAgICAgIAogICAgICAgIGZvciBjb3VudHJ5X25hbWUsIGFuYWx5c2lzIGluIHNlbGYuYW5hbHl6ZWRbImNvdW50cmllcyJdLml0ZW1zKCk6CiAgICAgICAgICAgIGlmICIxX21vbnRoIiBpbiBhbmFseXNpc1sicGVyaW9kcyJdIGFuZCAiM19tb250aHMiIGluIGFuYWx5c2lzWyJwZXJpb2RzIl06CiAgICAgICAgICAgICAgICBpbnRlcmVzdF8xbSA9IGFuYWx5c2lzWyJwZXJpb2RzIl1bIjFfbW9udGgiXVsibWF4X2ludGVyZXN0Il0KICAgICAgICAgICAgICAgIGludGVyZXN0XzNtID0gYW5hbHlzaXNbInBlcmlvZHMiXVsiM19tb250aHMiXVsibWF4X2ludGVyZXN0Il0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgaW50ZXJlc3RfM20gPiAwOgogICAgICAgICAgICAgICAgICAgIGNoYW5nZV9wZXJjZW50ID0gKChpbnRlcmVzdF8xbSAtIGludGVyZXN0XzNtKSAvIGludGVyZXN0XzNtKSAqIDEwMAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfcGVyY2VudCA9IDAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdHJlbmRzLmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgImNvdW50cnkiOiBjb3VudHJ5X25hbWUsCiAgICAgICAgICAgICAgICAgICAgImludGVyZXN0XzFtIjogaW50ZXJlc3RfMW0sCiAgICAgICAgICAgICAgICAgICAgImludGVyZXN0XzNtIjogaW50ZXJlc3RfM20sCiAgICAgICAgICAgICAgICAgICAgImNoYW5nZV9wZXJjZW50IjogY2hhbmdlX3BlcmNlbnQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgc2VsZi5hbmFseXplZFsidHJlbmRzIl0gPSB0cmVuZHMKICAgIAogICAgZGVmIGdldF90b3BfY291bnRyaWVzKHNlbGYsIHBlcmlvZD0iM19tb250aHMiLCBsaW1pdD0yMCk6CiAgICAgICAgcmV0dXJuIHNlbGYuYW5hbHl6ZWRbInJhbmtpbmciXS5nZXQocGVyaW9kLCBbXSk6bGltaXRdCiAgICAKICAgIGRlZiBnZXRfcmlzaW5nX2NvdW50cmllcyhzZWxmLCBsaW1pdD0xMCk6CiAgICAgICAgcmlzaW5nID0gW3QgZm9yIHQgaW4gc2VsZi5hbmFseXplZFsidHJlbmRzIl0gaWYgdFsiY2hhbmdlX3BlcmNlbnQiXSA+IDBdCiAgICAgICAgcmlzaW5nLnNvcnQoa2V5PWxhbWJkYSB4OiB4WyJjaGFuZ2VfcGVyY2VudCJdLCByZXZlcnNlPVRydWUpCiAgICAgICAgcmV0dXJuIHJpc2luZ1s6bGltaXRdCiAgICAKICAgIGRlZiBnZXRfZmFsbGluZ19jb3VudHJpZXMoc2VsZiwgbGltaXQ9MTApOgogICAgICAgIGZhbGxpbmcgPSBbdCBmb3IgdCBpbiBzZWxmLmFuYWx5emVkWyJ0cmVuZHMiXSBpZiB0WyJjaGFuZ2VfcGVyY2VudCJdIDwgMF0KICAgICAgICBmYWxsaW5nLnNvcnQoa2V5PWxhbWJkYSB4OiB4WyJjaGFuZ2VfcGVyY2VudCJdKQogICAgICAgIHJldHVybiBmYWxsaW5nWzpsaW1pdF0=

# –î–µ–∫–æ–¥–∏—Ä—É–µ–º main.py
base64 -d > main.py << 'EOF64'
IiIiCtCT0LvQsNCy0L3Ri9C5INGE0LDQudC7INC00LvRjyDQt9Cw0L/Rg9GB0LrQsCBTRU8t0L/QsNGA0YHQtdGA0LAK0JDQvdCw0LvQuNC30LjRgNGD0LXRgiDRgdC/0YDQvtGBINC90LAgVlBOINC/0L4g0LvQvtC60LDRhtC40Y/QvCDQsiDQoNC+0YHRgdC40LgKIiIiCmZyb20gcXVlcnlfYnVpbGRlciBpbXBvcnQgZ2VuZXJhdGVfYWxsX3F1ZXJpZXMKZnJvbSBnb29nbGVfdHJlbmRzX3BhcnNlciBpbXBvcnQgR29vZ2xlVHJlbmRzUGFyc2VyCmZyb20gYW5hbHl6ZXIgaW1wb3J0IFNFT0FuYWx5emVyCmZyb20gY29uZmlnIGltcG9ydCBDT1VOVFJJRVMsIFRJTUVGUkFNRVMKCgpkZWYgcHJpbnRfaGVhZGVyKCk6CiAgICBwcmludCgiPSIgKiA4MCkKICAgIHByaW50KCIgIiAqIDIwICsgItCQ0J3QkJ8QmNCXINCh0J/QoNCe0KHQkCDQndCQIFZQTiDQn9CeINCb0J7QmtCQ0KbQmNCv0JwiKQogICAgcHJpbnQoIiAiICogMzAgKyAi0KDQvtGB0YHQuNGPIHwgR29vZ2xlIFRyZW5kcyIpCiAgICBwcmludCgiPSIgKiA4MCkKCgpkZWYgcHJpbnRfdG9wX2NvdW50cmllcyhhbmFseXplcik6CiAgICBwcmludCgiXG4iICsgIj0iICogODApCiAgICBwcmludCgi0KdQntCf0L7QutC+ICjQodC/0L3QutC+0LIpIikKICAgIHByaW50KCI9IiAqIDgwKQogICAgCiAgICB0b3BfM20gPSBhbmFseXplci5nZXRfdG9wX2NvdW50cmllcygiM19tb250aHMiLCBsaW1pdD0yMCkKICAgIAogICAgcHJpbnQoZiJ7J+KEls8zNH0geyfQodGC0YDQsNC90LAnOjwyMH0geyfQn9C+0L/Rg9C70Y/RgNC90L7RgdGC0YwnOjwxNX0geyfQotC+0L8g0LfQsNC/0YDQvtGBJ30iKQogICAgcHJpbnQoIi0iICogODApCiAgICAKICAgIGZvciBpZHgsIGNvdW50cnkgaW4gZW51bWVyYXRlKHRvcF8zbSwgMSk6CiAgICAgICAgcHJpbnQoZiJ7aWR4Ojw0fSB7Y291bnRyeVsnY291bnRyeSddOjwyMH0ge2NvdW50cnlbJ2ludGVyZXN0J106PDE1fSB7Y291bnRyeVsndG9wX3F1ZXJ5J119IikKCgpkZWYgcHJpbnRfcGVyaW9kX2NvbXBhcmlzb24oYW5hbHl6ZXIpOgogICAgcHJpbnQoIlxuIiArICI9IiAqIDgwKQogICAgcHJpbnQoItCd0J7QnNCf0J7Qn9Cd0JjQmtCX0JzQntCUICjQndCjICUg0LzQtdGB0Y/RhSkgIikKICAgIHByaW50KCI9IiAqIDgwKQogICAgCiAgICB0b3BfM20gPSBhbmFseXplci5nZXRfdG9wX2NvdW50cmllcygiM19tb250aHMiLCBsaW1pdD0xMCkKICAgIHRvcF8xbSA9IGFuYWx5emVyLmdldF90b3BfY291bnRyaWVzKCIxX21vbnRoIiwgbGltaXQ9MTApCiAgICAKICAgIHByaW50KGYieyfQodGC0YDQsNC90LAnOjwyMH0geycxINC80LXRgdGP0YYnOjwxNX0geyczINC80LXRgdGP0YbQsCc6PDE1fSB7J9CY0LfQvNC10L3QtdC90LjQtSc6PDE1fSB7J9Ci0YDQtdC90LQnfSIpCiAgICBwcmludCgiLSIgKiA4MCkKICAgIAogICAgdG9wXzFtX2RpY3QgPSB7Y1siY291bnRyeSJdOiBjWyJpbnRlcmVzdCJdIGZvciBjIGluIHRvcF8xbX0KICAgIAogICAgZm9yIGNvdW50cnlfM20gaW4gdG9wXzNtWzoxMF06CiAgICAgICAgY291bnRyeSA9IGNvdW50cnlfM21bImNvdW50cnkiXQogICAgICAgIGludGVyZXN0XzNtID0gY291bnRyeV8zbVsiaW50ZXJlc3QiXQogICAgICAgIGludGVyZXN0XzFtID0gdG9wXzFtX2RpY3QuZ2V0KGNvdW50cnksIDApCiAgICAgICAgCiAgICAgICAgaWYgaW50ZXJlc3RfM20gPiAwOgogICAgICAgICAgICBjaGFuZ2UgPSAoKGludGVyZXN0XzFtIC0gaW50ZXJlc3RfM20pIC8gaW50ZXJlc3RfM20pICogMTAwCiAgICAgICAgICAgIGNoYW5nZV9zdHIgPSBmIntjaGFuZ2U6Ky4xZn0lIgogICAgICAgICAgICAKICAgICAgICAgICAgaWYgY2hhbmdlID4gNToKICAgICAgICAgICAgICAgIHRyZW5kID0gIuKGkeKGkeKGkSIKICAgICAgICAgICAgZWxpZiBjaGFuZ2UgPiAwOgogICAgICAgICAgICAgICAgdHJlbmQgPSAi4oaR4oaRIgogICAgICAgICAgICBlbGlmIGNoYW5nZSA8IC01OgogICAgICAgICAgICAgICAgdHJlbmQgPSAi4oaT4oaT4oaTIgogICAgICAgICAgICBlbGlmIGNoYW5nZSA8IDA6CiAgICAgICAgICAgICAgICB0cmVuZCA9ICLihpPihpTIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRyZW5kID0gIuKGkiIKICAgICAgICBlbHNlOgogICAgICAgICAgICBjaGFuZ2Vfc3RyID0gIk4vQSIKICAgICAgICAgICAgdHJlbmQgPSAi4oaSIKICAgICAgICAKICAgICAgICBwcmludChmIntjb3VudHJ5OjwyMH0ge2ludGVyZXN0XzFtOjwxNX0ge2ludGVyZXN0XzNtOjwxNX0ge2NoYW5nZV9zdHI6PDE1fSB7dHJlbmR9IikKCgpkZWYgcHJpbnRfcmlzaW5nX2NvdW50cmllcyhhbmFseXplcik6CiAgICBwcmludCgiXG4iICsgIj0iICogODApCiAgICBwcmludCgi0KdQntCf0L7QutC+0LIgKDihpEpIikKICAgIHByaW50KCI9IiAqIDgwKQogICAgCiAgICByaXNpbmcgPSBhbmFseXplci5nZXRfcmlzaW5nX2NvdW50cmllcyhsaW1pdD0xMCkKICAgIAogICAgcHJpbnQoZiJ7J9Ch0YLRgNCw0L3QsCc6PDIwfSB7JzEg0LzQtdGB0Y/Rhic6PDE1fSB7JzMg0LzQtdGB0Y/RhtCwJzo8MTV9IHsn0KDQvtGB0YInOjwxNX0iKQogICAgcHJpbnQoIi0iICogODApCiAgICAKICAgIGZvciBjb3VudHJ5IGluIHJpc2luZzoKICAgICAgICBwcmludChmIntjb3VudHJ5Wydjb3VudHJ5J106PDIwfSB7Y291bnRyeVsnaW50ZXJlc3RfMW0nXTo8MTV9ICIKICAgICAgICAgICAgICAgZiJ7Y291bnRyeVsnaW50ZXJlc3RfM20nXTo8MTV9ICt7Y291bnRyeVsnY2hhbmdlX3BlcmNlbnRdOi4xZn0lIikKCgpkZWYgcHJpbnRfZmFsbGluZ19jb3VudHJpZXMoYW5hbHl6ZXIpOgogICAgcHJpbnQoIlxuIiArICI9IiAqIDgwKQogICAgcHJpbnQoItCd0J7QnNCf0J7Qn9Cd0JjQmtCX0JzQntCUICjihpMpIikKICAgIHByaW50KCI9IiAqIDgwKQogICAgCiAgICBmYWxsaW5nID0gYW5hbHl6ZXIuZ2V0X2ZhbGxpbmdfY291bnRyaWVzKGxpbWl0PTEwKQogICAgCiAgICBpZiBmYWxsaW5nOgogICAgICAgIHByaW50KGYieynQodGC0YDQsNC90LAnOjwyMH0geycxINC80LXRgdGP0YYnOjwxNX0geyczINC80LXRgdGP0YbQsCc6PDE1fSB7J9Cw0LTQtdC90LjQtSc6PDE1fSIpCiAgICAgICAgcHJpbnQoIi0iICogODApCiAgICAgICAgCiAgICAgICAgZm9yIGNvdW50cnkgaW4gZmFsbGluZzoKICAgICAgICAgICAgcHJpbnQoZiJ7Y291bnRyeVsnY291bnRyeSddOjwyMH0ge2NvdW50cnlbJ2ludGVyZXN0XzFtJ106PDE1fSAiCiAgICAgICAgICAgICAgICAgIGYie2NvdW50cnlbJ2ludGVyZXN0XzNtJ106PDE1fSB7Y291bnRyeVsnY2hhbmdlX3BlcmNlbnRdOi4xZn0lIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoItCd0LXRgiDQtNCw0L3QvdGL0YUg0L7Qv9Cw0LTQtdC90LjQtSDRgdC/0YDQvtGB0LUiKQoKCmRlZiBwcmludF9yZWNvbW1lbmRhdGlvbnMoYW5hbHl6ZXIpOgogICAgcHJpbnQoIlxuIiArICI9IiAqIDgwKQogICAgcHJpbnQoItCS0L7Qt9Cz0L7QutC+0LrRgNC10YIg0L/RgNCw0L7RgNC+0YLRgdGC0LrQuCIpCiAgICBwcmludCgiPSIgKiA4MCkKICAgIAogICAgdG9wXzNtID0gYW5hbHl6ZXIuZ2V0X3RvcF9jb3VudHJpZXMoIjNfbW9udGhzIiwgbGltaXQ9MjApCiAgICByaXNpbmcgPSBhbmFseXplci5nZXRfcmlzaW5nX2NvdW50cmllcyhsaW1pdD0xMCkKICAgIAogICAgcHJpbnQoIlxu4J+hISAg0JrQoNCY0KLQmNCn0JXQodCa0JjQmSDQn9Cg0JjQntCg0JjQotCV0KIgKNCy0YvRgdC+0LrQuNC5INGB0L/RgNC+0YEpOiIpCiAgICBjcml0aWNhbCA9IFtdCiAgICBmb3IgY291bnRyeSBpbiByaXNpbmc6CiAgICAgICAgaW50ZXJlc3QgPSBuZXh0KChjWyJpbnRlcmVzdCJdIGZvciBjIGluIHRvcF8zbSBpZiBjWyJjb3VudHJ5Il0gPT0gY291bnRyeVsiY291bnRyeSJdKSwgMCkKICAgICAgICBpZiBpbnRlcmVzdCA+IDUwOgogICAgICAgICAgICBjcml0aWNhbC5hcHBlbmQoKGNvdW50cnlbImNvdW50cnkiXSwgaW50ZXJlc3QsIGNvdW50cnlbImNoYW5nZV9wZXJjZW50Il0pKQogICAgCiAgICBpZiBjcml0aWNhbDoKICAgICAgICBmb3IgY291bnRyeSwgaW50ZXJlc3QsIGNoYW5nZSBpbiBzb3J0ZWQoY3JpdGljYWwsIGtleT1sYW1iZGEgeDogLXhbMV0pOgogICAgICAgICAgICBwcmludChmIiDigKIge2NvdW50cnk6PDIwfSAo0YHQv9GA0L7RgToge2ludGVyZXN0fSwg0YDQvtGB0YI6ICt7Y2hhbmdlOi4xZn0lKSIpCiAgICBlbHNlOgogICAgICAgIHByaW50KCIg0J3QtdGCINC/0LDQsNC70LjQtSDRgNC+0YHRgtC10LjQsNGC0L7QvCIpCiAgICAKICAgIHByaW50KCJcbuKehSDQktCr0KHQntCa0JjQmSDQn9Cg0JjQntCg0JjQotCV0KIgKNCy0YvRgdC+0LrQuNC5INGB0L/RgNC+0YEpOiIpCiAgICBoaWdoID0gW2MgZm9yIGMgaW4gdG9wXzNtWzoxMF0gaWYgbm90IGFueShyWyJjb3VudHJ5Il0gPT0gY1siY291bnRyeSJdIGZvciByIGluIGNyaXRpY2FsKV0KICAgIGZvciBjb3VudHJ5IGluIGhpZ2g6CiAgICAgICAgcHJpbnQoZiIg4oCiIHtjb3VudHJ5Wydjb3VudHJ5J106PDIwfSAo0YHQv9GA0L7Rgjoge2NvdW50cnlbJ2ludGVyZXN0J119IikKICAgIAogICAgcHJpbnQoIlxu4pqg77iPINCc0Y/QstGA0LDQvNC4OiIpCiAgICBtZWRpdW0gPSB0b3BfM21bMTA6MjBdCiAgICBmb3IgY291bnRyeSBpbiBtZWRpdW06CiAgICAgICAgcHJpbnQoZiIg4oCiIHtjb3VudHJ5Wydjb3VudHJ5J106PDIwfSAo0YHQv9GA0L7RgToge2NvdW50cnlbJ2ludGVyZXN0J119IikKCgpkZWYgcHJpbnRfdGltZXN0YW1wKGFuYWx5emVyKToKICAgIHByaW50KGYiXG7QktGA0LXQvNGPINCw0L3QsNC70LjQt9CwOiB7YW5hbHl6ZXIuYW5hbHl6ZWQuZ2V0KCd0aW1lc3RhbXAnLCAnTi9BJyl9IikKCgpkZWYgbWFpbigpOgogICAgcHJpbnRfaGVhZGVyKCkKICAgIAogICAgcHJpbnQoIlxu0JPQtdC90LXRgNC40YDRg9C10Lwg0LfQsNC/0YDQvtGB0YsLi4uIikKICAgIGFsbF9xdWVyaWVzID0gZ2VuZXJhdGVfYWxsX3F1ZXJpZXMoQ09VTlRSSUVTKQogICAgdG90YWxfcXVlcmllcyA9IHN1bShsZW4odikgZm9yIHYgaW4gYWxsX3F1ZXJpZXMudmFsdWVzKCkpCiAgICBwcmludChmIuKEkz0KHQs9C10L3QtdGA0LjRgNC+0LLQsNC90L4ge2xlbihhbGxfcXVlcmllcyl9INGB0YLRgNCw0L0g0YEge3RvdGFsX3F1ZXJpZXN9INGL0L/QtdGB0LrQuNGDINC30LDQv9GA0L7RgdC+0LIiKQogICAgCiAgICBwcmludCgiXG7QlNC10LvQsNGC0L7Qu9GP0LXQvCDRgdC/0YDQvtGB0YbQsNC4Li4uIikKICAgIHBhcnNlciA9IEdvb2dsZVRyZW5kc1BhcnNlcigpCiAgICBwcmludCginJI0JPQtdC90LXRgNC+0LHQsiIpCiAgICAKICAgIHByaW50KCI9IiAqIDgwKQogICAgYWxsX2RhdGEgPSBwYXJzZXIucGFyc2VfYWxsX2NvdW50cmllcyhhbGxfcXVlcmllcywgVElNRUZSQU1FUykKICAgIAogICAgcHJpbnQoIlxu0JDQvdCw0LvQuNC30LjRgNC+0LLQsNC90L4g0LTQsNC90L3Ri9GFLi4uIikKICAgIGFuYWx5emVyID0gU0VPQW5hbHl6ZXIoYWxsX2RhdGEpCiAgICBhbmFseXplZCA9IGFuYWx5emVyLmFuYWx5emVfYWxsX2NvdW50cmllcygpCiAgICBwcmludChmIuKckyDQn9GA0L7QsNC90LDQu9C40LfQuNGA0L7QstCw0L3QviB7bGVuKGFuYWx5emVkWydjb3VudHJpZXMnXSl9INGB0YLRgNCw0L3Ri9GFIikKICAgIAogICAgcHJpbnRfdG9wX2NvdW50cmllcyhhbmFseXplcikKICAgIHByaW50X3BlcmlvZF9jb21wYXJpc29uKGFuYWx5emVyKQogICAgcHJpbnRfcmlzaW5nX2NvdW50cmllcyhhbmFseXplcikKICAgIHByaW50X2ZhbGxpbmdfY291bnRyaWVzKGFuYWx5emVyKQogICAgcHJpbnRfcmVjb21tZW5kYXRpb25zKGFuYWx5emVyKQogICAgcHJpbnRfdGltZXN0YW1wKGFuYWx5emVyKQogICAgCiAgICBwcmludCgiXG4iICsgIj0iICogODApCiAgICBwcmludCgi0JDQvdCw0LvQuNC3INC30LDQstC10YDRiNC10LUhIikKICAgIHByaW50KCI9IiAqIDgwKQoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCk=

# –ü—Ä–æ–≤–µ—Ä—è–µ–º Python
if ! command -v python3 &> /dev/null; then
    echo -e "${RED}‚ùå Python3 –Ω–µ –Ω–∞–π–¥–µ–Ω${NC}"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º python3-venv –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
echo -e "${YELLOW}üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ python3-venv...${NC}"
if ! python3 -m venv venv 2>/dev/null; then
    echo -e "${YELLOW}üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ python3-venv...${NC}"
    if [ -x "$(command -v apt)" ]; then
        apt update && apt install -y python3.12-venv python3-dev
    elif [ -x "$(command -v yum)" ]; then
        yum install -y python3.12-venv python3-devel
    else
        echo -e "${RED}‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å python3-venv${NC}"
        exit 1
    fi
    echo -e "${YELLOW}üîß –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...${NC}"
    python3 -m venv venv
fi

source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo -e "${YELLOW}üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...${NC}"
pip install -q -r requirements.txt

# –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∞–ª–∏–∑
echo -e "${GREEN}‚úì –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞...${NC}"
echo ""
python main.py

# –í—ã—Ö–æ–¥ - –≤—ã–∑–æ–≤–µ—Ç—Å—è cleanup() –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
exit 0